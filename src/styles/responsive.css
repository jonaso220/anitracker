/* ============ MOBILE ============ */
@media (max-width: 768px) {
  .header { padding: 0.75rem 1rem; padding-top: calc(0.75rem + env(safe-area-inset-top, 0px)); }
  .header-content { flex-direction: row; flex-wrap: wrap; justify-content: space-between; gap: 0.5rem; }
  .header-left { gap: 0.5rem; flex-wrap: wrap; flex: 1; min-width: 0; }
  .header-left .logo { font-size: 1.3rem; }
  .header-left .search-btn { padding: 0.45rem 0.8rem; font-size: 0.78rem; }
  .header-left .import-btn { padding: 0.45rem 0.8rem; font-size: 0.78rem; }
  .header-right { gap: 0.4rem; flex-wrap: nowrap; }
  .header-right .theme-toggle { padding: 0.4rem 0.7rem; font-size: 0.75rem; }
  .header-right .auth-btn { padding: 0.4rem 0.7rem; font-size: 0.75rem; }
  .header-right .user-info { font-size: 0.75rem; gap: 0.3rem; }
  .header-right .user-info img { width: 24px; height: 24px; }
  .day-row { flex-direction: column; }
  .day-label { flex-direction: row; width: 100%; min-width: unset; padding: 0.5rem 1rem; gap: 0.6rem; }
  .anime-card { min-width: 130px; width: 130px; }
  .anime-grid { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); }
  .season-grid { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); }
  .detail-header { flex-direction: column; align-items: center; text-align: center; }
  .search-result-item { flex-direction: column; align-items: center; text-align: center; }
  .search-result-actions { flex-direction: column; }

  /* Bottom navigation */
  .nav-tabs {
    position: fixed; bottom: 0; left: 0; right: 0;
    background: inherit; backdrop-filter: blur(20px);
    padding: 0.5rem 0.75rem; gap: 0.25rem;
    padding-bottom: calc(0.5rem + env(safe-area-inset-bottom, 0px));
    z-index: 100; margin: 0;
    justify-content: space-around;
    border-top: 1px solid;
    max-width: 100%;
  }
  .dark .nav-tabs { background: rgba(15,15,26,0.95); border-color: rgba(255,255,255,0.1); }
  .light .nav-tabs { background: rgba(240,244,255,0.95); border-color: rgba(0,0,0,0.1); }
  .nav-tab { padding: 0.5rem 0.6rem; font-size: 0.72rem; border: none; border-radius: 10px; flex: 1; text-align: center; }
  .main-content { padding-bottom: calc(5rem + env(safe-area-inset-bottom, 0px)); }
  .toast { bottom: calc(5rem + env(safe-area-inset-bottom, 0px)); }

  .stats-grid { grid-template-columns: repeat(2, 1fr); }
  .genre-bar-label { min-width: 70px; font-size: 0.75rem; }

  /* Nav tabs: emoji-only on mobile */
  .tab-label { display: none; }
  .nav-tab { padding: 0.5rem 0.4rem; font-size: 1.15rem; line-height: 1; }

  /* Search filters mobile */
  .search-filters-row { flex-direction: column; gap: 0.75rem; }
  .filter-year-range input { width: 70px; }
  .filter-toggle-btn { padding: 0.5rem 0.7rem; font-size: 0.78rem; }

  /* Bulk operations mobile */
  .bulk-toolbar { flex-direction: column; gap: 0.6rem; }
  .bulk-toolbar-left { width: 100%; justify-content: space-between; }
  .bulk-toolbar-actions { width: 100%; }
  .bulk-action-btn { flex: 1; font-size: 0.72rem; padding: 0.45rem 0.5rem; }

  /* Notification toggle mobile */
  .notif-toggle { padding: 0.4rem 0.6rem; font-size: 0.8rem; }

  /* Custom lists mobile */
  .create-list-emoji-picker { gap: 0.3rem; }
  .emoji-option { width: 32px; height: 32px; font-size: 1rem; }
  .create-list-input-row { flex-wrap: wrap; }
  .create-list-input-row input { min-width: 0; }
  .custom-list-name { font-size: 0.9rem; }
  .custom-list-rename-input { width: 110px; font-size: 0.85rem; }
  .custom-list-remove-btn { opacity: 1; }

  /* ============ BOTTOM SHEET MODALS ============ */
  .modal-overlay {
    align-items: flex-end;
    padding: 0;
    animation: slideUpOverlay 0.2s ease-out;
  }

  .bottom-sheet-handle {
    display: block;
    width: 36px; height: 4px; border-radius: 2px;
    margin: 0.5rem auto 0.25rem;
    flex-shrink: 0;
  }
  .dark .bottom-sheet-handle { background: rgba(255,255,255,0.2); }
  .light .bottom-sheet-handle { background: rgba(0,0,0,0.15); }

  .search-modal, .detail-modal, .day-picker-modal, .link-editor-modal, .import-modal {
    border-radius: 24px 24px 0 0;
    max-height: 92vh;
    animation: slideUp 0.3s ease-out;
    border-bottom: none;
    padding-bottom: calc(0.5rem + env(safe-area-inset-bottom, 0px));
  }

  .detail-modal {
    padding-bottom: calc(2rem + env(safe-area-inset-bottom, 0px));
  }

  .day-picker-modal, .link-editor-modal {
    padding-bottom: calc(2rem + env(safe-area-inset-bottom, 0px));
  }

  .import-modal {
    padding-bottom: calc(2rem + env(safe-area-inset-bottom, 0px));
  }

  .search-modal {
    max-height: 95vh;
    border-radius: 20px 20px 0 0;
  }
}
